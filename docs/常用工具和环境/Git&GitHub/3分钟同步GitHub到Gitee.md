å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä½•å‘€ã€‚

æœ€è¿‘ä¸¤ä¸ªæœˆï¼Œå—äºŒå“¥ï¼ˆæ²‰é»˜ç‹äºŒï¼‰æŒ‡ç‚¹ï¼Œæˆ‘å¯¹è‡ªå·±åˆ›ä½œçš„æ–¹å‘ä»¥åŠé£æ ¼åšäº†å½»åº•çš„åçœï¼Œå‘ç°è‡ªå·±æœ€å¤§çš„ä¸€ä¸ªæ¯›ç—…æ˜¯**ä¸å¤Ÿä¸“æ³¨**ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410162403.png#id=RaQnD&originHeight=592&originWidth=1034&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å°è¯•è¿‡å¾ˆå¤šæ–¹å‘ï¼Œä¹Ÿæƒ³åšå¾ˆå¤šäº‹æƒ…ï¼Œä½†æ°æ°æ¯ä»¶äº‹éƒ½æ²¡åšå¥½ã€‚æˆ‘ç°åœ¨è¦åšçš„æ˜¯ä¿æŒ**è¶³å¤Ÿå‚ç›´èšç„¦**ã€‚è·µè¡Œã€Œ**å°‘å°±æ˜¯å¤š**ã€çš„åŸåˆ™ï¼ŒåŠªåŠ›å°†ä¹‹å‰çš„å°è¯•åšå‡æ³•ã€‚

æœ€è¿‘å‘¢ï¼Œè¿˜æœ‰ä¸ªäº‹æƒ…è¦ç»™å¤§å®¶å‰§é€ä¸‹ï¼Œæˆ‘å’ŒäºŒå“¥åˆä¼™ä¸€èµ·æäº†ä¸ªé¡¹ç›®ï¼Œç»“åˆæˆ‘ä¸¤çš„ä¼˜åŠ¿ï¼ŒåŠ©åŠ›å¤§å®¶æ›´å¥½çš„**æ‹¿åˆ°æ»¡æ„çš„ offer**ã€‚è¿‡å¤šç»†èŠ‚å°±å…ˆä¸æè¿°äº†ï¼Œå¤§å®¶å¯ä»¥æœŸå¾…ä¸‹å“ˆï¼¼ï¼ˆï¼¾ ï¼¾ï¼‰ï¼

![é¡¹ç›®æ¶æ„å›¾](https://cdn.nlark.com/yuque/0/2024/png/29495295/1712738098355-8ecd06bc-31e2-4207-8679-3a99f196494f.png#averageHue=%23e6a459&clientId=u3db80d60-c7ef-4&from=paste&height=558&id=u50cfc3d6&originHeight=1115&originWidth=914&originalType=binary&ratio=2&rotation=0&showTitle=true&size=150313&status=done&style=none&taskId=u0e0f0b74-41f0-406f-9b7f-e050f9a9c38&title=%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E5%9B%BE&width=457 "é¡¹ç›®æ¶æ„å›¾")

åœ¨åšé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æƒ³å°† GitHub åº“è‡ªåŠ¨åŒæ­¥åˆ° Giteeï¼Œäº²è‡ªå®è·µäº†ä¸€ç§å¾ˆæ–¹ä¾¿çš„æ–¹æ³•ï¼Œ ç»™å¤§å®¶åˆ†äº«ä¸‹ã€‚

ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡å“ªå¤© GitHub æŒ‚äº†ï¼ˆè™½ç„¶å¤§æ¦‚ç‡ä¸å¤§å¯èƒ½ğŸ˜‚ï¼‰ï¼Œæˆ–è€… GitHub é™åˆ¶æˆ‘ä»¬è®¿é—®äº†ï¼Œæˆ‘ä»¬çš„æ•°æ®æ˜¯å¦æœ‰åšå¤šç«¯å¤‡ä»½å‘¢ï¼Ÿ

è€Œä¸” GitHub æ¯•ç«ŸæœåŠ¡å’Œæ•°æ®åœ¨å›½å¤–ï¼Œå¯¹å›½å†…è®¿é—®å¤šå°‘æœ‰äº›é™åˆ¶ï¼Œæ‰€ä»¥å°† GitHub çš„æ•°æ®åŒæ­¥ä¸€ä»½åˆ°å›½å†…çš„ Gitee å°±æ˜¾å¾—**å¾ˆé‡è¦**äº†ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410164453.png#id=I1d6U&originHeight=237&originWidth=817&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å…¶å®å•çº¯åŒæ­¥è¿˜æ˜¯æœ‰å¾ˆå¤šåŠæ³•çš„ï¼Œæ¯”å¦‚ç›´æ¥åœ¨æœ¬åœ°ä»£ç ç»‘å®šä¸¤ä¸ªæºï¼Œpush çš„æ—¶å€™ï¼Œåˆ†åˆ« push ä¸¤æ¬¡å°±å¯ä»¥äº†ã€‚

ä½† AI æ—¶ä»£ï¼Œæˆ‘ä»¬è®²ç©¶çš„æ˜¯ workflowï¼Œèƒ½æ•²ä¸€ä¸‹é”®ç›˜å°±æœ€å¥½ä¸è¦æ•²ä¸¤ä¸‹ï¼Œå“ˆå“ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´ç®€å•çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯**è‡ªåŠ¨åŒæ­¥**ï¼Œå½“æ¨é€åˆ° GitHub æ—¶ï¼Œèƒ½è‡ªåŠ¨åŒæ­¥åˆ° Giteeï¼Œæ— éœ€å…¶ä»–ä»»ä½•æ“ä½œğŸ‘ã€‚

ä¸‹é¢åªéœ€è¦ç”¨** 3 åˆ†é’Ÿåš 3 æ­¥é…ç½® **ï¼Œå°±å¯ä»¥åšåˆ°è¿™ä¸ªè‡ªåŠ¨çš„ workflow äº†ã€‚

# ç¬¬ä¸€æ­¥ï¼Œå¯¼å…¥ GitHub ä»“åº“åˆ° Gitee

æ‰“å¼€ Giteeï¼Œé€‰æ‹©ä» GitHub/Gitlab å¯¼å…¥ä»“åº“ï¼Œ

![](https://cdn.tobebetterjavaer.com/stutymore/image.webp#id=q2EBd&originHeight=357&originWidth=1517&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

é€‰æ‹©éœ€è¦å¯¼å…¥çš„ GitHub ä»“åº“ä»¥åŠéœ€è¦å¯¼å…¥åˆ° Gitee çš„å“ªä¸ªè·¯å¾„ä¸‹é¢ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410170226.png#id=Z6R0G&originHeight=847&originWidth=1578&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¯ä»¥ç›´æ¥å¯¼å…¥ GitHub ä»“åº“ï¼Œä½†éœ€è¦**æ˜¯ä½ è‡ªå·±çš„ç»„ç»‡å’Œä»“åº“**ï¼Œå¦‚æœæ‰¾ä¸åˆ°éœ€è¦åŒæ­¥çš„ä»“åº“ï¼Œç›´æ¥ä» URL å¯¼å…¥ä¹Ÿå¯ä»¥ã€‚æˆ‘è¿™é‡Œæ˜¯ç»„ç»‡åˆ°ç»„ç»‡çš„å¯¼å…¥æ–¹å¼ã€‚

è¿™æ˜¯å¯¼å…¥å®Œæˆåï¼š

![](https://cdn.tobebetterjavaer.com/stutymore/20240410170545.png#id=iV7tn&originHeight=842&originWidth=1805&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

> ç°åœ¨å¯¼å…¥å·²ç»å®Œæˆï¼Œä¸è¿›è¡Œåç»­æ“ä½œçš„è¯ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»æ‰‹åŠ¨åŒæ­¥æŒ‰é’®è¿›è¡ŒåŒæ­¥ï¼Œä½†æ¯æ¬¡éƒ½æ‰‹åŠ¨åŒæ­¥å¤ªéº»çƒ¦å•¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çš„æ˜¯èƒ½è‡ªåŠ¨åŒæ­¥ï¼


# ç¬¬äºŒæ­¥ï¼Œåœ¨ Github éœ€è¦åŒæ­¥çš„ä»“åº“ä¸Šæ·»åŠ  3 ä¸ª secrets

è¿™ä¸€æ­¥ä¸»è¦æ˜¯å¯¹åŒæ­¥è¿›è¡Œé…ç½®ï¼Œé…ç½® GitHub ä»“åº“çš„ secretsï¼Œè·¯å¾„ï¼šæ‰“å¼€ GitHub éœ€è¦åŒæ­¥çš„ä»“åº“ï¼Œ(**Setting -> Secrets -> New repository secret**)ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410170937.png#id=dCHNz&originHeight=846&originWidth=1542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

æ¥ä¸‹æ¥æ˜¯é…ç½®å…³é”®çš„ä¸‰ä¸ª secretsã€‚

## 1ã€GITEE_USER

è¿™æ˜¯é…ç½®ä¸ªäººçš„ Gitee user id:ï¼Œå°±æ˜¯æ‰“å¼€ Gitee ä¸ªäººä¸»é¡µã€‚å¤åˆ¶è¿™ä¸ªå°±å¯ä»¥å•¦ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410171323.png#id=PkN9Y&originHeight=859&originWidth=1548&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å½“ç„¶å¦‚æœæ˜¯ç»„ç»‡çš„è¯å¤åˆ¶å¯¹åº”çš„ç»„ç»‡ id å³å¯ã€‚

å¤åˆ¶å¥½ id åï¼Œç‚¹å‡» New respository secret åˆ›å»ºï¼š

![](https://cdn.tobebetterjavaer.com/stutymore/20240410171820.png#id=EYwaj&originHeight=810&originWidth=1680&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## 2ã€GITEE_PRIVATE_KEY

è¿™é‡Œéœ€è¦æ·»åŠ  ssh å¯†é’¥å¯¹ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰ç”Ÿæˆçš„ï¼Œå¯ä»¥å…ˆåœ¨æœ¬åœ°ç”Ÿæˆ SSH å…¬é’¥å’Œç§é’¥ï¼š

```bash
ssh-keygen -t ed25519 -C "Gitee SSH Key"
```

åœ¨æœ¬åœ°çš„~/.ssh ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šè¾“å‡ºï¼šid_ed25519  id_ed25519.pubï¼Œåˆ†åˆ«æ˜¯å…¬é’¥å’Œç§é’¥ã€‚

å…ˆæ‰“å¼€gitee_id_rsa.pubï¼Œå¤åˆ¶å…¬é’¥åˆ°ï¼šhttps://gitee.com/profile/sshkeys

![](https://cdn.tobebetterjavaer.com/stutymore/20240410172257.png#id=cFyjG&originHeight=691&originWidth=1452&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

åŒæ—¶å°†ç§é’¥æ·»åŠ åˆ° Github é¡¹ç›®çš„ secrets ä¸­ï¼š

![](https://cdn.tobebetterjavaer.com/stutymore/20240410172341.png#id=oEcon&originHeight=762&originWidth=1514&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

## 3ã€GITEE_TOKEN

è¿™ä¸€æ­¥éœ€è¦ç”Ÿæˆ Gitee ç§äººä»¤ç‰Œï¼Œåœ°å€ï¼š[https://gitee.com/profile/personal_access_tokens](https://gitee.com/profile/personal_access_tokens)

![](https://cdn.tobebetterjavaer.com/stutymore/20240410172446.png#id=kxDaw&originHeight=842&originWidth=1440&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¹¶æŠŠå£ä»¤å¤åˆ¶åˆ° secrets ä¸­ï¼ŒåŒæ ·åˆ›å»º GITEE_TOKEN è¿™ä¸ª secretã€‚
# ç¬¬ä¸‰æ­¥ï¼Œæ·»åŠ  sync2gitee.yml

å¤åˆ¶ sync2gitee.yml åˆ°åˆ° Github ä»“åº“ä¸‹çš„ .github æ–‡ä»¶å¤¹çš„ workflows æ–‡ä»¶å¤¹ä¸‹ï¼Œå³ [project-folder]/.github/workflows/sync2gitee.ymlï¼Œå¹¶æäº¤åˆ° Github ä»“åº“ã€‚ï¼ˆ**è¿™æ¬¡æ“ä½œå°±ä¼šè§¦å‘åŒæ­¥çš„ Action**ï¼‰

![](https://cdn.tobebetterjavaer.com/stutymore/20240410172846.png#id=ZP4ik&originHeight=777&originWidth=1514&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```xml
# é€šè¿‡ Github actionsï¼Œ åœ¨ Github ä»“åº“çš„æ¯ä¸€æ¬¡ commit åè‡ªåŠ¨åŒæ­¥åˆ° Gitee ä¸Š.
name: sync2gitee
on:
  push:
    branches:
      - master
      - dev
jobs:
  repo-sync:
    env:
      dst_key: ${{ secrets.GITEE_PRIVATE_KEY }}
      dst_token: ${{ secrets.GITEE_TOKEN }}
      gitee_user: ${{ secrets.GITEE_USER }}
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          persist-credentials: false

      - name: sync github -> gitee
        uses: Yikun/hub-mirror-action@master
        if: env.dst_key && env.dst_token && env.gitee_user
        with:
          # å¿…é€‰ï¼Œéœ€è¦åŒæ­¥çš„ Github ç”¨æˆ·ï¼ˆæºï¼‰
          src: 'github/${{ github.repository_owner }}'
          # å¿…é€‰ï¼Œéœ€è¦åŒæ­¥åˆ°çš„ Gitee ç”¨æˆ·ï¼ˆç›®çš„ï¼‰
          dst: 'gitee/${{ secrets.GITEE_USER }}'
          # å¿…é€‰ï¼ŒGiteeå…¬é’¥å¯¹åº”çš„ç§é’¥ï¼Œhttps://gitee.com/profile/sshkeys
          dst_key: ${{ secrets.GITEE_PRIVATE_KEY }}
          # å¿…é€‰ï¼ŒGiteeå¯¹åº”çš„ç”¨äºåˆ›å»ºä»“åº“çš„tokenï¼Œhttps://gitee.com/profile/personal_access_tokens
          dst_token:  ${{ secrets.GITEE_TOKEN }}
          # å¦‚æœæ˜¯ç»„ç»‡ï¼ŒæŒ‡å®šç»„ç»‡å³å¯ï¼Œé»˜è®¤ä¸ºç”¨æˆ· user
          account_type: org
          # ç›´æ¥å–å½“å‰é¡¹ç›®çš„ä»“åº“å
          static_list: ${{ github.event.repository.name }}
          # è¿˜æœ‰é»‘ã€ç™½åå•ï¼Œé™æ€åå•æœºåˆ¶ï¼Œå¯ä»¥ç”¨äºæ›´æ–°æŸäº›æŒ‡å®šåº“
          # static_list: 'repo_name,repo_name2'
          # black_list: 'repo_name,repo_name2'
          # white_list: 'repo_name,repo_name2'
```


**éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æœæ˜¯ä¸ªäººä»“åº“è€Œä¸æ˜¯ç»„ç»‡ï¼Œaccount_type: è¿™ä¸ªå‚æ•°è¦æ”¹ä¸º userã€‚**

OKï¼Œä¹‹åå°±ç›´æ¥å°†æ”¹åŠ¨æäº¤åˆ° GitHubï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410173248.png#id=kyww3&originHeight=497&originWidth=1873&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

æäº¤åˆ° GitHub è§¦å‘ action åï¼Œæˆ‘ä»¬å» Gitee çœ‹çœ‹æ˜¯å¦è‡ªåŠ¨åŒæ­¥ï¼š

![](https://cdn.tobebetterjavaer.com/stutymore/20240410173439.png#id=vGKp8&originHeight=642&originWidth=1499&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»è‡ªåŠ¨åŒæ­¥å•¦ï¼

ç®€å• 3 æ­¥å°±å·²ç»é…ç½®å¥½äº†è‡ªåŠ¨åŒæ­¥ï¼Œä»¥åæˆ‘ä»¬åœ¨ GitHub ä¸Š dev å’Œ master åˆ†æ”¯çš„æ”¹åŠ¨å°±ä¼šè‡ªåŠ¨åŒæ­¥åˆ° gitee äº†ã€‚å½“ç„¶ä½ ç›´æ¥åœ¨ GitHub ä¸Šè¿›è¡Œ PRï¼Œä¹Ÿæ˜¯å¯ä»¥è§¦å‘è‡ªåŠ¨åŒæ­¥çš„ã€‚

å½“ç„¶ gitee è¿˜æä¾›äº†ä¸€ç§æ›´ç®€å•çš„åŠæ³•ã€‚

![](https://cdn.tobebetterjavaer.com/stutymore/20240410173608.png#id=bl8sG&originHeight=632&originWidth=1612&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

![](https://cdn.tobebetterjavaer.com/stutymore/20240410173633.png#id=EtzLL&originHeight=603&originWidth=1485&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ä½†ç›®å‰è¿™ä¸ªåŠŸèƒ½ä½“éªŒä¸äº†ï¼Œä½†ç›²çŒœï¼Œåé¢è‚¯å®šä¼šé™åˆ¶æˆ–è€…æ”¶è´¹ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å…ˆç”¨èµ·æ¥ï¼Œè¿™ç§æ–¹æ³•å½“ç„¶æ›´æ–¹ä¾¿äº†ï¼Œä½†åé¢è¿˜èƒ½ä¸èƒ½ç”¨å°±ä¸çŸ¥é“äº†ã€‚

ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„åˆ†äº«ï¼Œæœ‰å¸®åŠ©å¯ä»¥ç‚¹ä¸ªèµã€‚
