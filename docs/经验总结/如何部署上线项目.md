å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯è‹ä½•ã€‚

ä»Šå¤©åœ¨ç¾¤é‡Œé¢çœ‹åˆ°æœ‰å°ä¼™ä¼´åé¦ˆè¯´ï¼Œé¢è¯•çš„æ—¶å€™ä¸€è¢«é—®åˆ°ç®€å†ä¸­çš„é¡¹ç›®è¿˜æ²¡ä¸Šçº¿ï¼Œå°±ä¸ç»§ç»­é—®äº†ï¼Œæ„Ÿè§‰æŒºå¥‡è‘©çš„ï¼Œè¦çŸ¥é“å°±æ ¡æ‹›æ¥è¯´ï¼Œé¡¹ç›®æœ¬èº«å¤§éƒ¨åˆ†éƒ½æ˜¯ç»ƒæ‰‹çš„é¡¹ç›®ï¼Œä¸Šçº¿ä¹Ÿå¾—èŠ±è´¹å¾ˆå¤šçš„æˆæœ¬å•Šã€‚

![ç¾¤å‹åé¦ˆé¡¹ç›®æ²¡ä¸Šçº¿å°±æ²¡ä¸‹æ–‡](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717391199871-d779e9a8-5439-46a1-9bb2-26ecc407fdf2.png#averageHue=%23e7e6e6&clientId=u3ecc8225-e0b4-4&from=paste&height=627&id=uc82201bd&originHeight=1254&originWidth=1636&originalType=binary&ratio=2&rotation=0&showTitle=true&size=198357&status=done&style=none&taskId=u709e7da6-6b1f-418d-bc9d-3fd197f0f32&title=%E7%BE%A4%E5%8F%8B%E5%8F%8D%E9%A6%88%E9%A1%B9%E7%9B%AE%E6%B2%A1%E4%B8%8A%E7%BA%BF%E5%B0%B1%E6%B2%A1%E4%B8%8B%E6%96%87&width=818 "ç¾¤å‹åé¦ˆé¡¹ç›®æ²¡ä¸Šçº¿å°±æ²¡ä¸‹æ–‡")

å°± Java åº”ç”¨æ¥è¯´æœ¬èº«æ˜¯å¾ˆåƒå†…å­˜çš„ï¼Œå†è€…ç°åœ¨ä¸æ‹¿ä¸ªå¾®æœåŠ¡é¡¹ç›®æŒ‚ç®€å†åˆæ‹¿ä¸å‡ºæ‰‹ï¼Œä½†ä¸€ä¸Šçº¿å¾®æœåŠ¡ï¼ŒæœåŠ¡å™¨èµ„æºè€—è´¹å°†ä¼šæ˜¯ä¹‹å‰çš„å¥½å‡ å€ã€‚å°±æ‹¿ PmHub æ¥è¯´ï¼Œä¹‹å‰å•ä½“çš„æ—¶å€™ï¼Œ1 æ ¸ 2G çš„æœåŠ¡å™¨ï¼Œè·‘çš„è¿˜å¯ä»¥ã€‚

ä½†ä¸€æ¢ä¸Šå¾®æœåŠ¡ï¼Œå³ä½¿å‡çº§ä¸º 4 æ ¸ 8Gï¼Œ æœåŠ¡è¿˜æ²¡å…¨å¼€çš„æƒ…å†µä¸‹ï¼Œå†…å­˜ä¸€æ ·è¢«æ‰“æ»¡ï¼Œä¸å¾—å·²æŠŠè¿è¡Œ CI/CD çš„ Jenkins ç»™å…³äº†æ‰å¾—ä»¥ã€Œä¿å‘½ã€ã€‚

![æˆ‘çš„æœåŠ¡å™¨èµ„æºå ç”¨æ•´ä½“æƒ…å†µ](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717391580994-908022c6-2f64-42db-8cf8-8d833d9508c9.png#averageHue=%232d2d2d&clientId=u3ecc8225-e0b4-4&from=paste&height=131&id=udc19e21b&originHeight=261&originWidth=1916&originalType=binary&ratio=2&rotation=0&showTitle=true&size=82033&status=done&style=none&taskId=u1e495d6b-7ee2-42f6-a5c7-e4a0a8519f6&title=%E6%88%91%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E6%95%B4%E4%BD%93%E6%83%85%E5%86%B5&width=958 "æˆ‘çš„æœåŠ¡å™¨èµ„æºå ç”¨æ•´ä½“æƒ…å†µ")

![æˆ‘çš„æœåŠ¡å™¨èµ„æºå ç”¨ç»†èŠ‚](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717391630119-bec3aa2d-7ac9-4d85-90f7-26ffebce31e4.png#averageHue=%23343433&clientId=u3ecc8225-e0b4-4&from=paste&height=406&id=u7811bdc0&originHeight=812&originWidth=1683&originalType=binary&ratio=2&rotation=0&showTitle=true&size=194804&status=done&style=none&taskId=u10e937da-d881-4786-b78d-37733a5e0d1&title=%E6%88%91%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E7%BB%86%E8%8A%82&width=841.5 "æˆ‘çš„æœåŠ¡å™¨èµ„æºå ç”¨ç»†èŠ‚")

è€Œä¸”è¯¥è¯´ä¸è¯´ï¼Œç°åœ¨çš„äº‘æœåŠ¡å™¨ç»­è´¹ä¹Ÿæ˜¯è´µçš„ç¦»è°±ï¼Œçœä¸‹å¥½å‡ ä¸ªæœˆçš„ä½™ç²®æ‰å’¬ç‰™å‡çº§é…ç½®ã€‚ï¼ˆä¸ºäº†é¡¹ç›®æœ‰ä¸ªèˆ’æœçš„ä½“éªŒç¯å¢ƒä¹Ÿæ˜¯æ‹¼äº†ğŸ˜‚ï¼‰

![å«æ³ªå‡çº§äº‘æœåŠ¡å™¨](https://cdn.nlark.com/yuque/0/2024/jpeg/29495295/1717391797923-93d00405-d420-460d-a261-c58b0e6e8c6e.jpeg#averageHue=%23217cfc&clientId=u3ecc8225-e0b4-4&from=paste&height=287&id=u9a7c061a&originHeight=574&originWidth=946&originalType=binary&ratio=2&rotation=0&showTitle=true&size=35204&status=done&style=none&taskId=u2611ca62-ca12-4ef3-95a0-1482fe7b98b&title=%E5%90%AB%E6%B3%AA%E5%8D%87%E7%BA%A7%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8&width=473 "å«æ³ªå‡çº§äº‘æœåŠ¡å™¨")

è¯´å›é¢è¯•éœ€è¦é¡¹ç›®ä¸Šçº¿çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—ä¸»è¦æœ‰ä¸¤ä¸ªåŠæ³•ï¼Œä¸€æ˜¯æœ¬åœ°ç”µè„‘éƒ¨ç½²å¤–æŒ‚å†…ç½‘ç©¿é€å‡ºå»ï¼Œè¿™æ ·ä¹Ÿçœå»ä¹°åŸŸåå’ŒæœåŠ¡å™¨ä¸€å †æ“ä½œï¼Œæ˜¯æ€§ä»·æ¯”æœ€é«˜çš„ã€‚ä½†ç¼ºç‚¹å°±æ˜¯**ç”µè„‘ä¸èƒ½å…³**ï¼Œç›´åˆ°æ‹¿åˆ° offer ç»“æŸã€‚

å½“ç„¶æ¡ä»¶å…è®¸çš„è¯ä¹Ÿå¯ä»¥ä½“éªŒä¸€æŠŠéƒ¨ç½²ä¸Šçº¿çš„**å¿«æ„Ÿ**ã€‚ä¸ºä»€ä¹ˆè¯´æ˜¯å¿«æ„Ÿå‘¢ï¼Ÿæœ‰ç»éªŒçš„å¼€å‘åº”è¯¥æ¸…æ¥šï¼Œæ¯æ¬¡ä¸Šçº¿éƒ½æ˜¯æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ï¼Œçº¿ä¸‹çˆ±ä½ åƒä¸‡éï¼Œä¸å¦‚çº¿ä¸Šè§ä¸€é¢ã€‚ä¸Šçº¿ä¸€æ¬¡å°±é¡ºåˆ©çš„ç®—æ˜¯è¿æ°”å¥½ï¼Œå¾ˆå¤šæƒ…å†µï¼Œä¸Šçº¿æ€»è¦å‡ºé—®é¢˜ã€‚

![c8177f3e6709c93d829448ccecc21ed9d00054a8.webp](https://cdn.nlark.com/yuque/0/2024/webp/29495295/1717392354529-8e863cbb-65ca-4f7c-a007-a7432eeeb982.webp#averageHue=%23777767&clientId=u3ecc8225-e0b4-4&from=drop&id=u569bffb1&originHeight=410&originWidth=440&originalType=binary&ratio=2&rotation=0&showTitle=false&size=9472&status=done&style=none&taskId=udef91476-1b6c-470d-a4ee-1a405c9da8d&title=)

ä»Šå¤©åˆ†äº«ä¸€ä¸‹æˆ‘ä»¬é¡¹ç›®çš„å®¹å™¨åŒ–éƒ¨ç½²å®æˆ˜ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚

# ä»€ä¹ˆæ˜¯ Docker å®¹å™¨

å½“æŠŠç¯å¢ƒä»ä¸€ä¸ªæœåŠ¡å™¨è¿ç§»åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå½“ä½ æ–°ä¹°äº†ç”µè„‘ï¼Œä¼šé‡ä¸Šè¦é‡æ–°å®‰è£…ä¸€ç³»åˆ—çš„è½¯ä»¶ï¼Œæ¯”å¦‚ JDKã€Tomcatã€Mavenã€Redis ç­‰ï¼Œè€Œå®‰è£…å®Œä¹‹åæ¯ä¸€æ¬¡éƒ½éœ€è¦å†å»é…ç½®ç¯å¢ƒï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯é‡å¤æ€§çš„å·¥ä½œï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³å‘¢ï¼Ÿ

ç©è¿‡äº‘æœåŠ¡å™¨çš„å¬è¯´è¿‡æœ‰é•œåƒä¸€è¯´ï¼Œå°†æ‰€æœ‰çš„è½¯ä»¶å’Œéœ€è¦çš„é…ç½®éƒ½æ‰“åŒ…å¥½åšæˆé•œåƒï¼Œä¸‹æ¬¡éœ€è¦çš„æ—¶å€™åªéœ€è¦å®‰è£…é•œåƒå°±å¯ä»¥ã€‚

ç±»ä¼¼çš„ï¼ŒDocker å°±æ˜¯è§£å†³è¿™ç§é—®é¢˜çš„ï¼Œå°†æ‰€æœ‰çš„è½¯ä»¶ç¨‹åºéƒ½æ”¾åœ¨ Docker ä»“åº“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç”µè„‘ä¸Šä¸‹è½½ Docker å³å¯ï¼Œä¸éœ€è¦å†å»è¿›è¡Œç¹ççš„å®‰è£…å’Œé…ç½®äº†ï¼Œåªéœ€è¦å‡ ä¸ªå‘½ä»¤å°±å¯ä»¥å°†æˆ‘ä»¬çš„ç¯å¢ƒæ­å»ºå¥½ï¼Œè¿™å°±æ˜¯ Dockerã€‚

![docker](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717393000653-dbb0e362-65a8-4bf7-98a1-f6551259e6c9.png#averageHue=%23ffffff&clientId=ue328ad8d-eb89-4&from=drop&id=u621d000a&originHeight=168&originWidth=300&originalType=binary&ratio=2&rotation=0&showTitle=true&size=2686&status=done&style=none&taskId=u53eca4fc-3b79-4cde-a88e-da0d23e0164&title=docker "docker")

æ€»ç»“æ¥è¯´ï¼Œ Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼›æ˜¯ä¸€ä¸ªè½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼ŒDocker æ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼›ç„¶ååœ¨é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶ä»–ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒï¼›è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒç§°ä¸ºå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚

## Docker æ¶æ„

Docker çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

![dockerå·¥ä½œåŸç†ï¼ˆæ¥æºäº Xï¼‰](https://cdn.nlark.com/yuque/0/2024/jpeg/29495295/1717393022969-5952deb0-bc79-4d4c-986b-dfada353a071.jpeg#averageHue=%23cfbb7a&clientId=ue328ad8d-eb89-4&from=drop&id=u7d889109&originHeight=1566&originWidth=968&originalType=binary&ratio=2&rotation=0&showTitle=true&size=126549&status=done&style=none&taskId=u3a9df4b6-67b7-4b93-95fb-37ff2202aab&title=docker%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%88%E6%9D%A5%E6%BA%90%E4%BA%8E%20X%EF%BC%89 "dockerå·¥ä½œåŸç†ï¼ˆæ¥æºäº Xï¼‰")

é€šè¿‡ä¸‹å›¾å¯ä»¥å¾—çŸ¥ï¼ŒDockeråœ¨è¿è¡Œæ—¶åˆ†ä¸ºDockerå¼•æ“ï¼ˆæœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼‰å’Œå®¢æˆ·ç«¯å·¥å…·ï¼Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å„ç§dockerå‘½ä»¤ï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·ä¸Dockerå¼•æ“è¿›è¡Œäº¤äº’ã€‚

![dockeræ¶æ„å›¾ï¼ˆæ¥æºäºç½‘ç»œï¼‰](https://cdn.nlark.com/yuque/0/2024/jpeg/29495295/1717393241495-4daeb2bd-f57e-465e-a59e-6f2468e579e3.jpeg#averageHue=%23eff4ec&clientId=ue328ad8d-eb89-4&from=drop&id=u889ea22e&originHeight=658&originWidth=1200&originalType=binary&ratio=2&rotation=0&showTitle=true&size=125193&status=done&style=none&taskId=u97967011-b46b-46c6-8bcf-d32f758eaa7&title=docker%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%88%E6%9D%A5%E6%BA%90%E4%BA%8E%E7%BD%91%E7%BB%9C%EF%BC%89 "dockeræ¶æ„å›¾ï¼ˆæ¥æºäºç½‘ç»œï¼‰")

## Dockerfile

åœ¨ Docker ä¸­æ„å»ºé•œåƒæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨Dockerfileã€‚Dockerfileæ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.docker.com/engine/reference/builderã€‚

å°±æ˜¯å¯ä»¥å­˜æ”¾æ„å»ºå¯åŠ¨æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨æ¥åŠ¨æ€æ„å»º docker é•œåƒå®¹å™¨çš„æ–‡ä»¶ã€‚

# ä¸ºä»€ä¹ˆè¦ç”¨ Docker-Compose

å› ä¸ºæ˜¯å¾®æœåŠ¡é¡¹ç›®ï¼Œç»å¸¸æ¥è¯´ï¼Œå•ç‹¬å»å¯åŠ¨æ¯ä¸ªæœåŠ¡å¤ªéº»çƒ¦äº†ï¼Œè€Œä¸”æœ‰äº›æœåŠ¡é—´æœ‰å¯åŠ¨é¡ºåºï¼Œæœ‰éœ€è¦æ•°æ®åº“æœåŠ¡å®¹å™¨ã€ç¼“å­˜å®¹å™¨ç­‰è¿™äº›ã€‚

è¿™å°±éœ€è¦ç”¨åˆ° Docker-Composeï¼Œå®ƒæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„æœåŠ¡ã€‚ç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥é€šè¿‡YAMLé…ç½®æ–‡ä»¶åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚

æˆ‘ä»¬çš„é¡¹ç›®ç”¨çš„ä¹Ÿæ˜¯ Docker-Composeï¼Œå¯ä»¥åšåˆ°ä¸€æ¡å‘½ä»¤å°±å¯ä»¥å¯åŠ¨æ‰€æœ‰æœåŠ¡å®¹å™¨ï¼Œä¸»æ‰“ä¸€ä¸ª**é«˜æ•ˆ**ã€‚

# é¡¹ç›®ä¸Šçº¿å®æˆ˜

## æœ¬åœ°æ„å»º
### 1ã€å‰ç«¯æ„å»º

å‰ç«¯çš„ vue è¿›è¡Œæ„å»ºçš„æ—¶å€™è¿˜æ˜¯æ¯”è¾ƒåƒèµ„æºçš„ï¼Œå¦‚æœèµ„æºé…ç½®ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æœ¬åœ°ç”µè„‘æ„å»ºï¼Œç„¶åå°†æ„å»ºå¥½åçš„ dist æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨å³å¯ã€‚

> å¦‚æœ.gitignore å¿½ç•¥äº† dist çš„æäº¤ï¼Œè®°å¾—æ³¨é‡Šæ‰ï¼


```bash
npm run build:prod
```

![æ„å»ºå¥½åç”Ÿæˆçš„é™æ€æ–‡ä»¶](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717393752960-2792abb4-4700-4d6a-850a-e851bddd505a.png#averageHue=%23191919&clientId=ue328ad8d-eb89-4&from=paste&height=290&id=u10d7be83&originHeight=579&originWidth=1691&originalType=binary&ratio=2&rotation=0&showTitle=true&size=146753&status=done&style=none&taskId=uc5d55b82-eddc-431d-abc4-0db0cc323b6&title=%E6%9E%84%E5%BB%BA%E5%A5%BD%E5%90%8E%E7%94%9F%E6%88%90%E7%9A%84%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6&width=845.5 "æ„å»ºå¥½åç”Ÿæˆçš„é™æ€æ–‡ä»¶")

###  åç«¯æ„å»º

åç«¯æ‰“åŒ…æ„å»ºå®Œå…¨å¯ä»¥æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œåé¢é…åˆ CI/CD æ„å»ºè„šæœ¬ï¼Œå¯ä»¥åšåˆ°è‡ªåŠ¨åŒ–æ‰“åŒ…æ„å»ºéƒ¨ç½²ä¸Šçº¿ï¼Œå®ƒå…¶å®ä¹Ÿå°±æ˜¯ä¸€æ¡å‘½ä»¤å³å¯ã€‚

```bash
# åˆ‡æ¢åˆ°ç›®å½•
cd /ä½ çš„å®‰è£…ç›®å½•/
# åŒ…æ„å»ºé¡¹ç›®
mvn -T 1C clean package -Dmaven.test.skip=true -Dmaven.compile.fork=true
```

æ„å»ºå®Œæˆåï¼Œåœ¨æ¯ä¸ªé¡¹ç›®çš„ target ä¸‹é¢å°±å¯ä»¥çœ‹åˆ°æ‰“åŒ…å¥½çš„ jar åŒ…ï¼š

![jaråŒ…çš„ä½ç½®](https://cdn.nlark.com/yuque/0/2024/png/29495295/1717394053974-5ae1ff7a-9743-45fa-8dd9-144cd93a0530.png#averageHue=%234b4532&clientId=ue328ad8d-eb89-4&from=paste&height=453&id=udb440935&originHeight=905&originWidth=1904&originalType=binary&ratio=2&rotation=0&showTitle=true&size=429530&status=done&style=none&taskId=uc012ad8d-4c18-47b5-83e1-a8bf53becf6&title=jar%E5%8C%85%E7%9A%84%E4%BD%8D%E7%BD%AE&width=952 "jaråŒ…çš„ä½ç½®")

## é˜¿é‡Œäº‘å¼€å¯å®‰å…¨ç»„

å¦‚æœæœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘çš„è¯ï¼Œåœ¨æ“ä½œäº‘æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆéœ€è¦å¼€å¯é˜¿é‡Œäº‘çš„å®‰å…¨ç»„ï¼Œè¿›è¡Œç«¯å£çš„æ”¾å¼€ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œäº‘æœåŠ¡å™¨çš„ç«¯å£ç”±ä»¥ä¸‹ä¸¤ä¸ªæ§åˆ¶ã€‚

- å®‰å…¨ç»„æ”¾å¼€ç«¯å£
- é˜²ç«å¢™å¼€å¯ç«¯å£

![é˜¿é‡Œäº‘å¼€å¯å®‰å…¨ç»„](https://cdn.nlark.com/yuque/0/2024/webp/29495295/1717394185423-454f6078-7cbe-4f4b-86cc-325b27ea512e.webp#averageHue=%23f2f2f2&clientId=ue328ad8d-eb89-4&from=drop&id=uc8b180c6&originHeight=391&originWidth=750&originalType=binary&ratio=2&rotation=0&showTitle=true&size=15594&status=done&style=none&taskId=u500d294a-f9e1-4151-a2b4-33565922cd3&title=%E9%98%BF%E9%87%8C%E4%BA%91%E5%BC%80%E5%90%AF%E5%AE%89%E5%85%A8%E7%BB%84 "é˜¿é‡Œäº‘å¼€å¯å®‰å…¨ç»„")

## ä¸‹è½½é¡¹ç›®

æ¥ä¸‹æ¥å°±æ˜¯åœ¨äº‘æœåŠ¡å™¨ä¸Š clone é¡¹ç›®ï¼š

```bash
# è¿›å»ç›®å½•
cd /ä½ çš„å®‰è£…ç›®å½•

git clone git@github.com:laigeoffer/pmhub.git
```


## æ‹·è´ jar åŒ…

å¾®æœåŠ¡çš„ jar åŒ…åˆ†æ•£åœ¨å„è‡ªçš„æ¨¡å—ï¼Œä¸å¤§æ–¹ä¾¿æ“ä½œï¼Œå› æ­¤æä¾›äº†ä¸€é”®å¤åˆ¶ jar åŒ…åˆç›¸å…³é…ç½®æ–‡ä»¶åˆ°ç»Ÿä¸€åœ°æ–¹çš„ shell è„šæœ¬å¦‚ä¸‹ï¼š

```bash
#!/bin/sh

# å¤åˆ¶é¡¹ç›®çš„æ–‡ä»¶åˆ°å¯¹åº”dockerè·¯å¾„ï¼Œä¾¿äºä¸€é”®ç”Ÿæˆé•œåƒã€‚
usage() {
	echo "Usage: sh copy.sh"
	exit 1
}


# copy sql
echo "begin copy sql "
cp ../sql/pmhub_20240305.sql ./mysql/db
cp ../sql/pmhub_nacos_20240423.sql ./mysql/db

# copy html
echo "begin copy html "
cp -r ../pmhub-ui/dist/** ./nginx/html/dist


# copy jar
echo "begin copy pmhub-gateway "
cp ../pmhub-gateway/target/pmhub-gateway.jar ./pmhub/gateway/jar

echo "begin copy pmhub-auth "
cp ../pmhub-auth/target/pmhub-auth.jar ./pmhub/auth/jar

echo "begin copy pmhub-monitor "
cp ../pmhub-monitor/target/pmhub-monitor.jar  ./pmhub/monitor/jar

echo "begin copy pmhub-system "
cp ../pmhub-modules/pmhub-system/target/pmhub-system.jar ./pmhub/modules/system/jar

echo "begin copy pmhub-job "
cp ../pmhub-modules/pmhub-job/target/pmhub-job.jar ./pmhub/modules/job/jar

echo "begin copy pmhub-gen "
cp ../pmhub-modules/pmhub-gen/target/pmhub-gen.jar ./pmhub/modules/gen/jar

echo "begin copy pmhub-project "
cp ../pmhub-modules/pmhub-project/target/pmhub-project.jar ./pmhub/modules/project/jar

echo "begin copy pmhub-workflow "
cp ../pmhub-modules/pmhub-workflow/target/pmhub-workflow.jar ./pmhub/modules/workflow/jar


```

è¿™æ ·å°±å¯ä»¥å°† jar åŒ…åˆé…ç½®æ–‡ä»¶ç»Ÿä¸€è·¯å¾„ï¼Œæ–¹ä¾¿ç®¡ç†å’Œä¸€é”®å¯åŠ¨ã€‚
## å¼€å¯æœåŠ¡å™¨é˜²ç«å¢™

æœåŠ¡å™¨é˜²ç«å¢™ç«¯å£çš„å¼€å¯ä¹Ÿæ˜¯åŸºäºé˜¿é‡Œäº‘å®‰å…¨ç»„å¼€å¯ä¹‹åï¼Œå…¶å®å¼€å¯å‘½ä»¤æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæ˜¯ Debian ç³»ç»Ÿçš„è¯æ˜¯ï¼š

```bash
ufw allow 9849/tcp
```

å¦‚æœæ˜¯ centos ç³»ç»Ÿï¼š
```bash
firewall-cmd --add-port=80/tcp --permanent
```

ä½†æ˜¯ç«¯å£æœ‰å¥½å¤šï¼Œèƒ½ä¸èƒ½ä¸€æ¬¡æ€§å¼€å¯å‘¢ï¼Ÿå¯ä»¥çš„ï¼ŒåŒæ ·ç¼–å†™ shell è„šæœ¬ï¼Œä¸€é”®å¯åŠ¨å³å¯ï¼š

```bash
sh deploy.sh port
# æŸ¥çœ‹æ˜¯å¦å¼€å¯
ufw status
```

## å¯åŠ¨ Nginx

Nginx æˆ‘å»ºè®®ä¸è¦é€šè¿‡å®¹å™¨æ¥å®‰è£…ï¼Œç›´æ¥å®‰è£…åœ¨å®¿ä¸»æœºä¸Šä¼šæ¯”è¾ƒå¥½ã€‚

å®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
1ã€å®‰è£…
apt install -y nginx
2ã€çœ‹ç‰ˆæœ¬å·
nginx -v
# æ˜¾ç¤ºnginxçš„ç‰ˆæœ¬å·å’Œç¼–è¯‘ä¿¡æ¯
nginx -V
# æŸ¥çœ‹å®‰è£…çš„æ‰€æœ‰ Nginx åŒ…
# æŸ¥çœ‹ Nginx å®‰è£…ç›¸å…³çš„æ–‡ä»¶ä½ç½®ä¿¡æ¯
whereis nginx

3ã€å¯åŠ¨Nginx
cd /usr/sbin/
./nginx

4ã€æŸ¥è¯¢è¿›ç¨‹ï¼š

ps -ef | grep nginx
æŸ¥çœ‹è¿›ç¨‹id
ps -C nginx -o pid

5ã€æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®
nginx -t

é‡å¯å‘½ä»¤ï¼šsystemctl restart nginx

6ã€ä½¿é…ç½®ç”Ÿæ•ˆ

nginx -s reload
```

åœ¨ nginx ä¸­é…ç½®å‰æ®µçš„ dist æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ä»¥åŠåŸŸåå’Œ https å³å¯å®Œæˆåå‘ä»£ç†ã€‚æ„å‘³ç€ä½ å°±å¯ä»¥**ç›´æ¥é€šè¿‡åŸŸåè®¿é—®åˆ°ç½‘ç«™å•¦**ã€‚
## ä¸€é”®å¯åŠ¨åŸºç¡€ç¯å¢ƒ

åŸºç¡€ç¯å¢ƒåŒ…æ‹¬ MySQLã€Redisã€Nacos ç­‰ï¼ŒåŒæ ·æ„å»ºäº† shell è„šæœ¬æ–¹ä¾¿ä¸€é”®å¯åŠ¨ã€‚

```bash
# è¿›å»ç›®å½•
cd /å®‰è£…è·¯å¾„/pmhub/docker

# å¯åŠ¨åŸºç¡€ç¯å¢ƒï¼ˆå¿…é¡»ï¼‰
sh deploy.sh base
```

å…¶å®å†…éƒ¨ä¹Ÿå°±æ˜¯å‡ ä¸ª docker-compose å¯åŠ¨å‘½ä»¤ï¼š
```bash
# å¯åŠ¨åŸºç¡€ç¯å¢ƒï¼ˆå¿…é¡»ï¼‰
base(){
	docker-compose up -d pmhub-mysql pmhub-redis pmhub-nacos
}
```

## ä¸€é”®å¯åŠ¨åº”ç”¨æœåŠ¡

åŒé‡Œï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€æ¬¡æ€§å¯åŠ¨çš„å‡ ä¸ªæœåŠ¡æ”¾åœ¨ä¸€é”®å¯åŠ¨è„šæœ¬ä¸­å³å¯ä¸€é”®å¯åŠ¨ï¼Œä½†æ˜¯å¦‚æœæœåŠ¡å™¨ CPU æ ¸æ•°ä¸è¶³ï¼Œä¸å»ºè®®ä¸€æ¬¡å¯åŠ¨è¿‡å¤šæœåŠ¡ï¼Œå¦åˆ™ç›´æ¥å°±ä¼šæŠŠæœåŠ¡å™¨æå’‹äº†ï¼Œæ¨èè¿˜æ˜¯å•ä¸ªæœåŠ¡å¯åŠ¨å¹¶è§‚å¯Ÿå†…å­˜ä½¿ç”¨æƒ…å†µã€‚

```bash
docker-compose up -d ä½ è¦å¯åŠ¨çš„æœåŠ¡
```
# æ‰©å±•ï¼šjar åŒ…å¯åŠ¨

å¦‚æœåœ¨æœ¬åœ°æˆ–è€…ä¸æƒ³é€šè¿‡ docker çš„æ–¹å¼å¯åŠ¨ï¼Œä¹Ÿå®Œå…¨å¯ä»¥ç”¨ jar çš„æ–¹å¼å¯åŠ¨ï¼Œä½†å¹¶ä¸æ¨èï¼Œä¸€æ¥æ¯”è¾ƒæ…¢ï¼ŒäºŒæ¥ä¸æ–¹ä¾¿ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œéœ€è¦å¯åŠ¨ pmhub-gatewayï¼š

```bash
# å®šä½åˆ°jarç›®å½•
cd /ä½ çš„å®‰è£…ç›®å½•/pmhub/docker/pmhub/gateway/jar

# åå°å¯åŠ¨
java -jar pmhub-gateway.jar & 

# æŸ¥çœ‹æ˜¯å¦å¯åŠ¨
netstat -tuln | grep 6880
æˆ–è€…
ps aux | grep pmhub-gateway.jar

# å¦‚ä½•å…³é—­æœåŠ¡
kill 12345
```

è‡³æ­¤ï¼Œåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸Šçº¿æœåŠ¡å°±å·²ç»å®Œæˆï¼Œä½†è¿˜æœ‰ä¸å°‘çš„ç»†èŠ‚ï¼Œæ¯”å¦‚åŸŸåå¦‚ä½•é…ç½®å•Šï¼Œå¦‚ä½•è¿›è¡Œ ssl è§£æå•Šï¼Œå¦‚ä½•è¿›è¡Œ CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²å•Šï¼Œè¿™äº›å…¶å®éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨å»ç©äº†æ‰èƒ½ææ˜ç™½ã€‚

å¦‚æœæ˜¯åœ¨å¤§å…¬å¸ï¼Œä¸Šçº¿æµç¨‹å…¶å®**è¿˜æ›´å¤æ‚**ï¼Œä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ä¸€å®šæ˜¯æ‡‚çš„ä¸Šçº¿çš„æµç¨‹çš„ï¼Œæˆ‘æƒ³è¿™å¯èƒ½æ˜¯é¢è¯•å®˜ä¸ºä»€ä¹ˆå¯¹æœªä¸Šçº¿é¡¹ç›®è¿™ä¹ˆåœ¨æ„çš„ä¸€äº›åŸå› å§ï¼ˆä¸ªäººè§‚ç‚¹ï¼‰ã€‚

# ending
å†ç»å‡ ä¸ªæœˆæ—¶é—´ï¼Œæˆ‘ä»¬çš„çš„é¦–ä¸ªå¼€æºé¡¹ç›®å°±è¦ä¸Šçº¿äº†ï¼Œè¿™æ˜¯ä¸€å¥—åŸºäº SpringCloud & SpringCloud Alibaba & LLM çš„åˆ†å¸ƒå¼å¾®æœåŠ¡çš„æ™ºèƒ½é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œè¿™ä¸ªé¡¹ç›®æ—¨åœ¨è®©åŒå­¦ä»¬å¿«é€ŸæŒæ¡å¾®æœåŠ¡/åˆ†å¸ƒå¼é¡¹ç›®çš„æ¶æ„è®¾è®¡å’Œå¼€å‘æµç¨‹ï¼Œå¦‚æœæƒ³åœ¨æ ¡æ‹›æˆ–è€…ç¤¾æ‹›ä¸­æ‹¿åˆ°ä¸€ä¸ª**æ»¡æ„çš„ offer**ï¼Œ è¿™ä¸ªé¡¹ç›®å°†æ˜¯ä¸€ä¸ªéå¸¸ nice çš„é€‰æ‹©ã€‚

é¡¹ç›®åŒ…æ‹¬è®¤è¯ã€æµç¨‹ã€é¡¹ç›®ç®¡ç†ã€ç³»ç»Ÿã€ç½‘å…³ç­‰æœåŠ¡ã€‚åŒ…å«äº† Redis ç¼“å­˜ã€RocketMQ æ¶ˆæ¯é˜Ÿåˆ—ã€Docker å®¹å™¨åŒ–ã€Jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²ã€Spring Security å®‰å…¨æ¡†æ¶ã€Nacos æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€sentinel åˆ†å¸ƒå¼äº‹åŠ¡ã€Spring Boot Actuator æœåŠ¡ç›‘æ§ã€SkyWalking é“¾è·¯è¿½è¸ªã€OAuth2 ç»Ÿä¸€è®¤è¯ã€OpenFeign æœåŠ¡è°ƒç”¨ï¼ŒVue3 å‰ç«¯æ¡†æ¶ç­‰äº’è”ç½‘å¼€å‘ä¸­éœ€è¦ç”¨åˆ°çš„ä¸»æµæŠ€æœ¯æ ˆï¼Œå¯ä»¥å¸®åŠ©åŒå­¦ä»¬å¿«é€ŸæŒæ¡å¾®æœåŠ¡/åˆ†å¸ƒå¼é¡¹ç›®çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚

å¹¶ä¸”åŒæ—¶ä¹Ÿæ˜¯ä¸€å¥—ä¼ä¸šå·¥ä½œæµçš„å¼€å‘æ¡†æ¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚ï¼Œå¿«é€Ÿå®šåˆ¶å‡ºé€‚åˆè‡ªå·±å…¬å¸çš„ä¼ä¸šå·¥ä½œæµç³»ç»Ÿã€‚

é¡¹ç›®ç›®å‰å·²ç»å–å¾—** 24 ä¸ª star** äº†ï¼ˆæ¯ä¸€ä¸ª star éƒ½æ ¼å¤–çæƒœï¼‰

çœŸå¸Œæœ›èƒ½å°½å¿«å’Œå¤§å®¶è§é¢å‘€ï¼



## 





